trigger:
  - main

pool:
  name: Default
  demands:
    - Agent.Name -equals SATHEESH

variables:
  imageName: satheesh2003/flask-devops-app
  imageTag: v4

steps:
  - script: |
      echo "$(DOCKER_PASSWORD)" | docker login -u "$(DOCKER_USERNAME)" --password-stdin
    displayName: 'Docker Login'

  - script: |
      docker build -t $(imageName):$(imageTag) .
      docker push $(imageName):$(imageTag)
    displayName: 'Build and Push to Docker Hub'
